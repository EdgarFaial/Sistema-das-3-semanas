<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Principal - Sistema Gamificado</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-dark: #0a0a0f;
            --primary-black: #111118;
            --secondary-white: #f0f0f5;
            --accent-blue: #000d7e;
            --accent-cyan: #3700ff42;
            --danger-red: #ff4757;
            --warning-orange: #ff9f43;
            --success-green: #2ed573;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
            --border-color: #ffffff;
            --card-bg: rgba(20, 20, 30, 0.9);
            --sidebar-bg: #080810;
            --glow-blue: 0 0 15px rgba(0, 247, 255, 0.473);
            --glow-cyan: 0 0 10px rgba(0, 247, 255, 0.3);
        }

        body {
            background-color: var(--primary-dark);
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(0, 168, 255, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(0, 245, 255, 0.03) 0%, transparent 50%),
                linear-gradient(45deg, var(--primary-black) 25%, transparent 25%),
                linear-gradient(-45deg, var(--primary-black) 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, var(--primary-black) 75%),
                linear-gradient(-45deg, transparent 75%, var(--primary-black) 75%);
            background-size: 100% 100%, 100% 100%, 20px 20px, 20px 20px, 20px 20px, 20px 20px;
            background-position: 0 0, 0 0, 0 0, 10px 10px, 10px 10px, 20px 20px;
            color: var(--text-primary);
            font-family: 'Segoe UI', 'Hiragino Sans', 'Meiryo UI', sans-serif;
            line-height: 1.6;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* ===== LAYOUT ===== */
        .app-container {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 100vh;
            position: relative;
        }

        .app-container::before {
            content: "‰æç";
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40vw;
            font-family: serif;
            color: rgba(0, 168, 255, 0.02);
            z-index: -1;
            pointer-events: none;
            user-select: none;
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border-color);
            padding: 2rem 1.5rem;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 2.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--accent-blue);
            position: relative;
        }

        .logo::after {
            content: "Ê≠¶Â£´ÈÅì";
            position: absolute;
            bottom: -8px;
            left: 0;
            font-size: 0.7rem;
            color: var(--accent-cyan);
            letter-spacing: 3px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-cyan));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: var(--glow-blue);
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--accent-blue), var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 1px;
        }

        .nav-section {
            margin-bottom: 2rem;
        }

        .nav-title {
            font-size: 0.9rem;
            color: var(--accent-cyan);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 1rem;
            padding-left: 0.5rem;
            border-left: 3px solid var(--accent-blue);
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 0.8rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 6px;
            margin-bottom: 0.5rem;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .nav-item:hover {
            background: rgba(0, 168, 255, 0.1);
            color: var(--text-primary);
            border-color: var(--accent-blue);
        }

        .nav-item.active {
            background: rgba(0, 168, 255, 0.15);
            color: var(--text-primary);
            border-color: var(--accent-blue);
            box-shadow: var(--glow-blue);
        }

        .nav-item i {
            width: 20px;
            text-align: center;
        }

        .system-status {
            margin-top: auto;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .status-value {
            color: var(--accent-cyan);
            font-weight: 600;
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            padding: 2rem;
            overflow-y: auto;
            max-height: 100vh;
        }

        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .header-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            position: relative;
            padding-left: 1rem;
        }

        .header-title::before {
            content: "";
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(to bottom, var(--accent-blue), var(--accent-cyan));
            border-radius: 2px;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
        }

        /* ===== CARDS ===== */
        .card {
            background: var(--card-bg);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-blue), transparent);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title i {
            color: var(--accent-blue);
        }

        /* ===== BUTTONS ===== */
        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-blue), #0097e6);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow-blue);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            border-color: var(--accent-blue);
            color: var(--accent-blue);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger-red), #ff3838);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(255, 71, 87, 0.5);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-green), #1dd1a1);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 15px rgba(46, 213, 115, 0.5);
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }

        /* ===== FORMS ===== */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            font-family: monospace;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: var(--glow-blue);
        }

        textarea.form-control {
            min-height: 200px;
            resize: vertical;
        }

        /* ===== LOG VALIDATION ===== */
        .validation-result {
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.3);
            border-left: 4px solid var(--accent-blue);
        }

        .validation-success {
            border-left-color: var(--success-green);
            background: rgba(46, 213, 115, 0.1);
        }

        .validation-error {
            border-left-color: var(--danger-red);
            background: rgba(255, 71, 87, 0.1);
        }

        .validation-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 0.5rem;
        }

        .validation-item i {
            width: 20px;
        }

        .validation-item.success i {
            color: var(--success-green);
        }

        .validation-item.error i {
            color: var(--danger-red);
        }

        /* ===== TABLES ===== */
        .table-container {
            overflow-x: auto;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background: var(--card-bg);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: rgba(0, 168, 255, 0.1);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--accent-cyan);
            border-bottom: 2px solid var(--border-color);
            white-space: nowrap;
        }

        td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        tr:hover td {
            background: rgba(0, 168, 255, 0.05);
            color: var(--text-primary);
        }

        .rank-badge {
            display: inline-block;
            width: 28px;
            height: 28px;
            line-height: 28px;
            text-align: center;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-cyan));
            color: var(--primary-black);
            font-weight: 700;
            border-radius: 4px;
            margin-right: 10px;
        }

        .rank-1 .rank-badge {
            background: linear-gradient(135deg, #ffd700, #ff9500);
        }

        .rank-2 .rank-badge {
            background: linear-gradient(135deg, #c0c0c0, #a0a0a0);
        }

        .rank-3 .rank-badge {
            background: linear-gradient(135deg, #cd7f32, #b56c2a);
        }

        .streak-indicator {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            color: var(--danger-red);
            font-weight: 600;
        }

        .level-badge {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-cyan));
            color: var(--primary-black);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: 0.85rem;
        }

        /* ===== EXPANDABLE SECTIONS ===== */
        .expandable-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .expandable-header:hover {
            border-color: var(--accent-blue);
        }

        .expandable-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 0 0 6px 6px;
        }

        .expandable-content.active {
            max-height: 500px;
            padding: 1rem;
            border-top: 1px solid var(--border-color);
        }

        /* ===== TOAST MESSAGES ===== */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .toast {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--accent-blue);
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            border-radius: 6px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            min-width: 300px;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast i {
            font-size: 1.2rem;
        }

        .toast.success {
            border-left-color: var(--success-green);
        }

        .toast.error {
            border-left-color: var(--danger-red);
        }

        .toast.warning {
            border-left-color: var(--warning-orange);
        }

        /* ===== PROGRESS BARS ===== */
        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-cyan));
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* ===== MODALS ===== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .modal::before {
            content: "Ê≠¶";
            position: absolute;
            bottom: -20px;
            right: -20px;
            font-size: 10rem;
            color: rgba(0, 168, 255, 0.03);
            transform: rotate(-15deg);
            pointer-events: none;
            user-select: none;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: rgba(255, 71, 87, 0.1);
            color: var(--danger-red);
        }

        /* ===== STATS CARDS ===== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-blue);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(to right, var(--accent-blue), var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 1024px) {
            .app-container {
                grid-template-columns: 1fr;
            }
            

            
            .mobile-menu-btn {
                display: block;
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 1001;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 1rem;
            }
            
            .header-actions {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ===== ANIMATIONS ===== */
        @keyframes glow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .glowing {
            animation: glow 2s infinite;
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .slide-in {
            animation: slideIn 0.3s ease;
        }

        /* ===== JAPANESE DECORATIONS ===== */
        .japanese-border {
            position: relative;
            padding: 2rem;
        }

        .japanese-border::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent, 
                var(--accent-blue) 20%, 
                var(--accent-cyan) 50%, 
                var(--accent-blue) 80%, 
                transparent
            );
        }

        .japanese-border::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, 
                transparent, 
                var(--accent-blue) 20%, 
                var(--accent-cyan) 50%, 
                var(--accent-blue) 80%, 
                transparent
            );
        }

        .kanji-decoration {
            position: absolute;
            color: rgba(0, 168, 255, 0.05);
            font-size: 8rem;
            font-family: serif;
            pointer-events: none;
            user-select: none;
            z-index: -1;
        }

        .kanji-1 { top: 10%; left: 5%; transform: rotate(-15deg); }
        .kanji-2 { bottom: 10%; right: 5%; transform: rotate(15deg); }

        /* ===== SCROLLBAR ===== */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--accent-blue), var(--accent-cyan));
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(var(--accent-cyan), var(--accent-blue));
        }
/* Remova ou comente estas linhas no CSS */
/* 
@media (max-width: 1024px) {
    .sidebar {
        display: none;  ‚Üê REMOVER ESTA LINHA
    }
}
*/

/* Adicione isto no final do CSS */
.mobile-menu-btn {
    display: none;
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 1001;
    background: var(--accent-blue);
    color: white;
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    font-size: 1.2rem;
    cursor: pointer;
    box-shadow: var(--glow-blue);
}

@media (max-width: 1024px) {
    .mobile-menu-btn {
        display: block;
    }
    
    .sidebar {
        position: fixed;
        left: -280px;
        transition: left 0.3s ease;
        z-index: 1000;
    }
    
    .sidebar.active {
        left: 0;
    }
    
    .sidebar-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        z-index: 999;
    }
    
    .sidebar-overlay.active {
        display: block;
    }
}
    </style>
</head>
<body>
  
  <!-- Adicione isto antes do fechamento do </body> -->
<div class="mobile-nav" style="display: none;">
    <button onclick="switchSection('logs')">üì• Logs</button>
    <button onclick="switchSection('rankings')">üèÜ Ranking</button>
    <button onclick="switchSection('players')">üë§ Jogadores</button>
</div>

<style>
.mobile-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--primary-black);
    display: flex;
    justify-content: space-around;
    padding: 10px;
    border-top: 1px solid var(--border-color);
    z-index: 1000;
}

.mobile-nav button {
    background: none;
    border: none;
    color: var(--text-secondary);
    padding: 10px;
    font-size: 1.5rem;
}

.mobile-nav button.active {
    color: var(--accent-blue);
}

@media (max-width: 768px) {
    .mobile-nav {
        display: flex;
    }
}
</style>

<script>
function switchSection(section) {
    // Esconde todas as se√ß√µes
    document.querySelectorAll('.content-section').forEach(sec => {
        sec.style.display = 'none';
    });
    
    // Mostra a se√ß√£o selecionada
    document.getElementById(section + '-section').style.display = 'block';
    
    // Atualiza menu mobile
    document.querySelectorAll('.mobile-nav button').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
}
</script>
  
  
    <!-- Japanese Decorations -->
    <div class="kanji-decoration kanji-1">Âøç</div>
    <div class="kanji-decoration kanji-2">ÈÅì</div>

    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-dragon"></i>
                </div>
                <div class="logo-text">SHOGUN</div>
            </div>

            <nav>
                <div class="nav-section">
                    <div class="nav-title">Gerenciamento</div>
                    <a href="#logs" class="nav-item active" data-section="logs">
                        <i class="fas fa-file-import"></i>
                        <span>Receber Logs</span>
                    </a>
                    <a href="#rankings" class="nav-item" data-section="rankings">
                        <i class="fas fa-trophy"></i>
                        <span>Rankings</span>
                    </a>
                    <a href="#players" class="nav-item" data-section="players">
                        <i class="fas fa-users"></i>
                        <span>Jogadores</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-title">Ferramentas</div>
                    <a href="#tools" class="nav-item" data-section="tools">
                        <i class="fas fa-tools"></i>
                        <span>Ferramentas</span>
                    </a>
                    <a href="#export" class="nav-item" data-section="export">
                        <i class="fas fa-file-export"></i>
                        <span>Exportar Dados</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-title">Visualiza√ß√£o</div>
                    <a href="#stats" class="nav-item" data-section="stats">
                        <i class="fas fa-chart-bar"></i>
                        <span>Estat√≠sticas</span>
                    </a>
                    <a href="#history" class="nav-item" data-section="history">
                        <i class="fas fa-history"></i>
                        <span>Hist√≥rico</span>
                    </a>
                </div>
            </nav>

            <div class="system-status">
                <div class="status-item">
                    <span>Jogadores Ativos:</span>
                    <span class="status-value" id="active-players">0</span>
                </div>
                <div class="status-item">
                    <span>Logs Processados:</span>
                    <span class="status-value" id="processed-logs">0</span>
                </div>
                <div class="status-item">
                    <span>√öltima Atualiza√ß√£o:</span>
                    <span class="status-value" id="last-update">--:--</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Toast Container -->
            <div class="toast-container"></div>

            <!-- Section: Logs Input -->
            <section id="logs-section" class="content-section active">
                <div class="content-header">
                    <h2 class="header-title">Receber Logs dos Jogadores</h2>
                    <div class="header-actions">
                        <button class="btn btn-secondary" id="validate-single">
                            <i class="fas fa-check-circle"></i> Validar √önico
                        </button>
                        <button class="btn btn-primary" id="process-logs">
                            <i class="fas fa-bolt"></i> Processar Todos
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-paste"></i> √Årea de Colagem
                        </h3>
                        <button class="btn btn-small btn-secondary" id="clear-input">
                            <i class="fas fa-broom"></i> Limpar
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Cole os logs JSON aqui (um por linha ou separados por '---')</label>
                        <textarea class="form-control" id="log-input" placeholder='{"player": "Nome", "date": "2024-01-01", ...}'>
[
  {
    "player": "Samurai1",
    "date": "2024-01-15",
    "attributesConfig": {
      "mandatory": ["CORPO", "MENTE", "ESPIRITO"],
      "optional": ["CRIATIVIDADE"]
    },
    "habits": [
      {
        "name": "Medita√ß√£o 10min",
        "attribute": "MENTE",
        "type": "binary",
        "value": 1,
        "points": 10
      }
    ],
    "attributePoints": {
      "CORPO": 30,
      "MENTE": 20,
      "ESPIRITO": 15
    },
    "streaks": {
      "global": 5,
      "CORPO": 3,
      "MENTE": 7,
      "ESPIRITO": 2
    },
    "totalPoints": 65,
    "level": 3
  }
]
                        </textarea>
                    </div>

                    <div class="validation-result" id="validation-result" style="display: none;">
                        <h4 style="margin-bottom: 1rem; color: var(--accent-cyan);">
                            <i class="fas fa-clipboard-check"></i> Resultado da Valida√ß√£o
                        </h4>
                        <div id="validation-details"></div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-exclamation-triangle"></i> Regras de Valida√ß√£o
                        </h3>
                    </div>
                    
                    <div class="validation-item success">
                        <i class="fas fa-check-circle"></i>
                        <span>Data n√£o pode ser futura</span>
                    </div>
                    <div class="validation-item success">
                        <i class="fas fa-check-circle"></i>
                        <span>Duplica√ß√£o de data por jogador bloqueada</span>
                    </div>
                    <div class="validation-item success">
                        <i class="fas fa-check-circle"></i>
                        <span>Logs atrasados at√© 48h permitidos</span>
                    </div>
                    <div class="validation-item success">
                        <i class="fas fa-check-circle"></i>
                        <span>Streaks recalculados pelo sistema</span>
                    </div>
                    <div class="validation-item success">
                        <i class="fas fa-check-circle"></i>
                        <span>Pontua√ß√£o normalizada por atributo</span>
                    </div>
                </div>
            </section>

            <!-- Section: Rankings -->
            <section id="rankings-section" class="content-section" style="display: none;">
                <div class="content-header">
                    <h2 class="header-title">Rankings do Sistema</h2>
                    <div class="header-actions">
                        <select class="form-control" style="width: auto;" id="ranking-period">
                            <option value="daily">Di√°rio</option>
                            <option value="weekly" selected>Semanal</option>
                            <option value="monthly">Mensal</option>
                            <option value="overall">Geral</option>
                        </select>
                        <button class="btn btn-secondary" id="refresh-rankings">
                            <i class="fas fa-sync-alt"></i> Atualizar
                        </button>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-players">0</div>
                        <div class="stat-label">Jogadores Ativos</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="avg-score">0.0</div>
                        <div class="stat-label">Pontua√ß√£o M√©dia</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-days">0</div>
                        <div class="stat-label">Dias Registrados</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="best-streak">0</div>
                        <div class="stat-label">Melhor Streak</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-list-ol"></i> Classifica√ß√£o
                        </h3>
                        <span class="text-secondary" id="ranking-period-label">Semanal</span>
                    </div>
                    
                    <div class="table-container">
                        <table id="ranking-table">
                            <thead>
                                <tr>
                                    <th width="60">Rank</th>
                                    <th>Jogador</th>
                                    <th>Pontua√ß√£o</th>
                                    <th>Pontos</th>
                                    <th>Streak</th>
                                    <th>N√≠vel</th>
                                    <th>Dias Ativos</th>
                                </tr>
                            </thead>
                            <tbody id="ranking-body">
                                <!-- Ranking ser√° gerado aqui -->
                                <tr>
                                    <td colspan="7" style="text-align: center; padding: 3rem; color: var(--text-secondary);">
                                        <i class="fas fa-trophy" style="font-size: 3rem; margin-bottom: 1rem; display: block; opacity: 0.3;"></i>
                                        Processe logs para gerar rankings
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Section: Players -->
            <section id="players-section" class="content-section" style="display: none;">
                <div class="content-header">
                    <h2 class="header-title">Gerenciar Jogadores</h2>
                    <div class="header-actions">
                        <button class="btn btn-secondary" id="export-players">
                            <i class="fas fa-download"></i> Exportar
                        </button>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-user-ninja"></i> Lista de Jogadores
                        </h3>
                        <div class="form-control" style="width: 200px; padding: 0.5rem;">
                            <input type="text" id="player-search" placeholder="Buscar jogador..." style="background: none; border: none; color: var(--text-primary); width: 100%;">
                        </div>
                    </div>
                    
                    <div id="players-list">
                        <!-- Lista de jogadores ser√° gerada aqui -->
                        <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
                            <i class="fas fa-users" style="font-size: 3rem; margin-bottom: 1rem; display: block; opacity: 0.3;"></i>
                            Nenhum jogador registrado ainda
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section: Tools -->
            <section id="tools-section" class="content-section" style="display: none;">
                <div class="content-header">
                    <h2 class="header-title">Ferramentas Administrativas</h2>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-tools"></i> Manuten√ß√£o do Sistema
                        </h3>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                        <div class="tool-card">
                            <h4 style="margin-bottom: 1rem; color: var(--accent-cyan);">
                                <i class="fas fa-broom"></i> Limpeza
                            </h4>
                            <p style="margin-bottom: 1rem; color: var(--text-secondary);">
                                Remove logs inv√°lidos e dados corrompidos
                            </p>
                            <button class="btn btn-danger" id="clean-invalid-logs">
                                <i class="fas fa-trash-alt"></i> Limpar Logs Inv√°lidos
                            </button>
                        </div>
                        
                        <div class="tool-card">
                            <h4 style="margin-bottom: 1rem; color: var(--accent-cyan);">
                                <i class="fas fa-redo"></i> Reset
                            </h4>
                            <p style="margin-bottom: 1rem; color: var(--text-secondary);">
                                Resetar rankings e dados do sistema
                            </p>
                            <button class="btn btn-danger" id="reset-system">
                                <i class="fas fa-exclamation-triangle"></i> Resetar Sistema
                            </button>
                        </div>
                        
                        <div class="tool-card">
                            <h4 style="margin-bottom: 1rem; color: var(--accent-cyan);">
                                <i class="fas fa-database"></i> Backup
                            </h4>
                            <p style="margin-bottom: 1rem; color: var(--text-secondary);">
                                Criar backup completo dos dados
                            </p>
                            <button class="btn btn-success" id="create-backup">
                                <i class="fas fa-save"></i> Criar Backup
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Section: Export -->
            <section id="export-section" class="content-section" style="display: none;">
                <div class="content-header">
                    <h2 class="header-title">Exportar Dados</h2>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-file-export"></i> Formatos de Exporta√ß√£o
                        </h3>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                        <div class="tool-card">
                            <h4 style="margin-bottom: 1rem; color: var(--accent-cyan);">
                                <i class="fas fa-file-code"></i> JSON Completo
                            </h4>
                            <p style="margin-bottom: 1rem; color: var(--text-secondary);">
                                Exportar todos os dados do sistema
                            </p>
                            <button class="btn btn-primary" id="export-json">
                                <i class="fas fa-download"></i> Exportar JSON
                            </button>
                        </div>
                        
                        <div class="tool-card">
                            <h4 style="margin-bottom: 1rem; color: var(--accent-cyan);">
                                <i class="fas fa-file-csv"></i> CSV para Planilhas
                            </h4>
                            <p style="margin-bottom: 1rem; color: var(--text-secondary);">
                                Dados tabulares para Excel/Sheets
                            </p>
                            <button class="btn btn-primary" id="export-csv">
                                <i class="fas fa-download"></i> Exportar CSV
                            </button>
                        </div>
                        
                        <div class="tool-card">
                            <h4 style="margin-bottom: 1rem; color: var(--accent-cyan);">
                                <i class="fas fa-history"></i> Hist√≥rico por Jogador
                            </h4>
                            <p style="margin-bottom: 1rem; color: var(--text-secondary);">
                                Progresso detalhado de cada jogador
                            </p>
                            <button class="btn btn-primary" id="export-history">
                                <i class="fas fa-download"></i> Exportar Hist√≥rico
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modals -->
    <div class="modal-overlay" id="player-details-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-user-ninja"></i> Detalhes do Jogador
                </h3>
                <button class="modal-close" id="close-player-modal">&times;</button>
            </div>
            <div class="modal-body" id="player-details-content">
                <!-- Conte√∫do ser√° injetado aqui -->
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="reset-confirm-modal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-exclamation-triangle"></i> Confirma√ß√£o de Reset
                </h3>
                <button class="modal-close" id="close-reset-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="validation-item error">
                    <i class="fas fa-exclamation-circle"></i>
                    <span><strong>ATEN√á√ÉO:</strong> Esta a√ß√£o √© irrevers√≠vel!</span>
                </div>
                
                <p style="margin: 1.5rem 0; color: var(--text-secondary);">
                    Todos os dados ser√£o permanentemente apagados, incluindo:
                </p>
                
                <ul style="margin: 1.5rem 0; padding-left: 1.5rem; color: var(--text-secondary);">
                    <li>Todos os rankings</li>
                    <li>Hist√≥rico de jogadores</li>
                    <li>Logs processados</li>
                    <li>Estat√≠sticas do sistema</li>
                </ul>
                
                <p style="margin: 1.5rem 0; color: var(--danger-red);">
                    <i class="fas fa-skull-crossbones"></i> Esta a√ß√£o n√£o pode ser desfeita!
                </p>
                
                <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                    <button class="btn btn-secondary flex-1" id="cancel-reset">Cancelar</button>
                    <button class="btn btn-danger flex-1" id="confirm-reset">
                        <i class="fas fa-bomb"></i> CONFIRMAR RESET
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // CONSTANTES DO SISTEMA
        // ============================================
        const SYSTEM = {
            MAX_POINTS_PER_DAY: 200,
            MAX_POINTS_PER_ATTRIBUTE: 50,
            MAX_DAYS_LATE: 2, // 48 horas
            STORAGE_KEYS: {
                PLAYERS: 'principal_players',
                LOGS: 'principal_logs',
                RANKINGS: 'principal_rankings',
                STATS: 'principal_stats',
                BACKUP: 'principal_backup'
            }
        };

        // ============================================
        // ESTADO DO SISTEMA
        // ============================================
        let appState = {
            players: new Map(),
            logs: [],
            rankings: {
                daily: [],
                weekly: [],
                monthly: [],
                overall: []
            },
            stats: {
                totalPlayers: 0,
                processedLogs: 0,
                avgScore: 0,
                bestStreak: 0
            }
        };

        // ============================================
        // INICIALIZA√á√ÉO
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üéå Iniciando Sistema Principal...');
            
            initSystem();
            setupEventListeners();
            loadFromStorage();
            updateUI();
            
            // Atualizar hora
            updateTime();
            setInterval(updateTime, 60000);
        });

        function initSystem() {
            console.log('‚öôÔ∏è Sistema Principal inicializado');
        }

        function updateTime() {
            const now = new Date();
            document.getElementById('last-update').textContent = 
                now.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
        }

        // ============================================
        // GERENCIAMENTO DE ARMAZENAMENTO
        // ============================================
        function saveToStorage() {
            try {
                // Converter Map para objeto
                const playersObj = {};
                appState.players.forEach((player, name) => {
                    playersObj[name] = player;
                });
                
                localStorage.setItem(SYSTEM.STORAGE_KEYS.PLAYERS, JSON.stringify(playersObj));
                localStorage.setItem(SYSTEM.STORAGE_KEYS.LOGS, JSON.stringify(appState.logs));
                localStorage.setItem(SYSTEM.STORAGE_KEYS.RANKINGS, JSON.stringify(appState.rankings));
                localStorage.setItem(SYSTEM.STORAGE_KEYS.STATS, JSON.stringify(appState.stats));
                
                console.log('üíæ Dados salvos no localStorage');
                return true;
            } catch (error) {
                console.error('‚ùå Erro ao salvar dados:', error);
                showToast('Erro ao salvar dados!', 'error');
                return false;
            }
        }

        function loadFromStorage() {
            try {
                // Carregar jogadores
                const playersData = localStorage.getItem(SYSTEM.STORAGE_KEYS.PLAYERS);
                if (playersData) {
                    const playersObj = JSON.parse(playersData);
                    appState.players = new Map(Object.entries(playersObj));
                }
                
                // Carregar logs
                const logsData = localStorage.getItem(SYSTEM.STORAGE_KEYS.LOGS);
                if (logsData) {
                    appState.logs = JSON.parse(logsData);
                }
                
                // Carregar rankings
                const rankingsData = localStorage.getItem(SYSTEM.STORAGE_KEYS.RANKINGS);
                if (rankingsData) {
                    appState.rankings = JSON.parse(rankingsData);
                }
                
                // Carregar estat√≠sticas
                const statsData = localStorage.getItem(SYSTEM.STORAGE_KEYS.STATS);
                if (statsData) {
                    appState.stats = JSON.parse(statsData);
                }
                
                console.log('üìÇ Dados carregados do localStorage');
                updateStats();
                return true;
            } catch (error) {
                console.error('‚ùå Erro ao carregar dados:', error);
                showToast('Erro ao carregar dados salvos!', 'error');
                return false;
            }
        }

        function createBackup() {
            try {
                const backup = {
                    timestamp: new Date().toISOString(),
                    players: Object.fromEntries(appState.players),
                    logs: appState.logs,
                    rankings: appState.rankings,
                    stats: appState.stats
                };
                
                const backupStr = JSON.stringify(backup, null, 2);
                localStorage.setItem(SYSTEM.STORAGE_KEYS.BACKUP, backupStr);
                
                // Oferecer para download
                const blob = new Blob([backupStr], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `backup-principal-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showToast('Backup criado e baixado com sucesso!', 'success');
                return true;
            } catch (error) {
                console.error('‚ùå Erro ao criar backup:', error);
                showToast('Erro ao criar backup!', 'error');
                return false;
            }
        }

        // ============================================
        // PROCESSAMENTO DE LOGS
        // ============================================
        function processLogs() {
            const input = document.getElementById('log-input').value.trim();
            if (!input) {
                showToast('Insira logs para processar!', 'warning');
                return;
            }
            
            let logs;
            try {
                logs = parseLogs(input);
            } catch (error) {
                showToast('Erro ao analisar logs: ' + error.message, 'error');
                return;
            }
            
            let processed = 0;
            let errors = 0;
            let skipped = 0;
            
            logs.forEach(log => {
                const validation = validateLog(log);
                
                if (validation.isValid) {
                    if (processSingleLog(log)) {
                        processed++;
                    } else {
                        errors++;
                    }
                } else {
                    errors++;
                    console.warn('Log inv√°lido:', validation.errors);
                }
            });
            
            // Atualizar rankings
            updateRankings();
            
            // Salvar dados
            saveToStorage();
            updateUI();
            
            // Mostrar resultado
            showToast(
                `Processamento conclu√≠do! ‚úÖ ${processed} aceitos, ‚ùå ${errors} erros, ‚è≠Ô∏è ${skipped} ignorados`,
                processed > 0 ? 'success' : 'warning'
            );
            
            // Limpar √°rea de entrada
            document.getElementById('log-input').value = '';
            
            // Mostrar valida√ß√£o
            showValidationResult(logs.length, processed, errors, skipped);
        }

        function parseLogs(input) {
            const logs = [];
            
            // Tentar interpretar como array JSON
            try {
                const parsed = JSON.parse(input);
                if (Array.isArray(parsed)) {
                    return parsed;
                } else {
                    return [parsed];
                }
            } catch (e) {
                // Se falhar, tratar como logs separados
                const logStrings = input.split('---').map(s => s.trim()).filter(s => s);
                
                logStrings.forEach(str => {
                    try {
                        // Remover poss√≠veis caracteres extras
                        let cleanStr = str.trim();
                        if (!cleanStr.startsWith('{')) {
                            // Encontrar primeiro {
                            const start = cleanStr.indexOf('{');
                            if (start !== -1) cleanStr = cleanStr.substring(start);
                        }
                        if (!cleanStr.endsWith('}')) {
                            // Encontrar √∫ltimo }
                            const end = cleanStr.lastIndexOf('}');
                            if (end !== -1) cleanStr = cleanStr.substring(0, end + 1);
                        }
                        
                        const log = JSON.parse(cleanStr);
                        logs.push(log);
                    } catch (parseError) {
                        console.warn('Erro ao parsear log:', parseError, 'String:', str.substring(0, 100));
                        throw new Error('Formato JSON inv√°lido');
                    }
                });
            }
            
            return logs;
        }

        function validateLog(log) {
            const errors = [];
            
            // Campos obrigat√≥rios
            const requiredFields = ['player', 'date', 'attributesConfig', 'habits', 
                                  'attributePoints', 'streaks', 'totalPoints', 'level'];
            
            requiredFields.forEach(field => {
                if (!log.hasOwnProperty(field)) {
                    errors.push(`Campo obrigat√≥rio ausente: ${field}`);
                }
            });
            
            // Validar tipos
            if (typeof log.player !== 'string' || !log.player.trim()) {
                errors.push('Nome do jogador inv√°lido');
            }
            
            if (typeof log.date !== 'string' || !/^\d{4}-\d{2}-\d{2}$/.test(log.date)) {
                errors.push('Formato de data inv√°lido (use YYYY-MM-DD)');
            }
            
            // Validar data (n√£o pode ser futura)
            const logDate = new Date(log.date);
            const today = new Date();
            today.setHours(23, 59, 59, 999);
            
            if (logDate > today) {
                errors.push('Data n√£o pode ser futura');
            }
            
            // Validar estrutura
            if (!log.attributesConfig || !log.attributesConfig.mandatory || !Array.isArray(log.attributesConfig.mandatory)) {
                errors.push('Estrutura attributesConfig inv√°lida');
            }
            
            if (!Array.isArray(log.habits)) {
                errors.push('Habits deve ser um array');
            }
            
            // Validar limites de pontos
            if (typeof log.totalPoints !== 'number' || log.totalPoints < 0 || log.totalPoints > SYSTEM.MAX_POINTS_PER_DAY) {
                errors.push(`Pontos totais inv√°lidos (0-${SYSTEM.MAX_POINTS_PER_DAY})`);
            }
            
            // Recalcular pontos para validar integridade
            const calculatedPoints = recalculatePoints(log);
            if (Math.abs(calculatedPoints - log.totalPoints) > 0.01) {
                errors.push(`Inconsist√™ncia nos pontos: ${log.totalPoints} vs ${calculatedPoints} calculado`);
            }
            
            return {
                isValid: errors.length === 0,
                errors: errors
            };
        }

        function recalculatePoints(log) {
            let total = 0;
            const attributeTotals = {};
            
            log.habits.forEach(habit => {
                total += habit.points || 0;
                
                if (!attributeTotals[habit.attribute]) {
                    attributeTotals[habit.attribute] = 0;
                }
                attributeTotals[habit.attribute] += habit.points || 0;
            });
            
            // Validar limites por atributo
            Object.values(attributeTotals).forEach(points => {
                if (points > SYSTEM.MAX_POINTS_PER_ATTRIBUTE) {
                    total -= (points - SYSTEM.MAX_POINTS_PER_ATTRIBUTE);
                }
            });
            
            // Limitar total di√°rio
            return Math.min(total, SYSTEM.MAX_POINTS_PER_DAY);
        }

        function processSingleLog(log) {
            try {
                const playerName = log.player.trim();
                const logDate = log.date;
                
                // Verificar se j√° existe log para esta data
                const existingLog = appState.logs.find(l => 
                    l.player === playerName && l.date === logDate
                );
                
                if (existingLog) {
                    console.warn(`Log duplicado para ${playerName} na data ${logDate}`);
                    showToast(`Log duplicado ignorado: ${playerName} - ${logDate}`, 'warning');
                    return false;
                }
                
                // Verificar se est√° atrasado mais de 48h
                const logDateTime = new Date(logDate).getTime();
                const now = Date.now();
                const hoursLate = (now - logDateTime) / (1000 * 60 * 60);
                
                if (hoursLate > (SYSTEM.MAX_DAYS_LATE * 24)) {
                    console.warn(`Log muito atrasado para ${playerName}: ${hoursLate.toFixed(1)}h atr√°s`);
                    log.isLate = true;
                    log.originalStreaks = { ...log.streaks };
                    // Zerar streaks para logs muito atrasados
                    log.streaks = { global: 0 };
                    Object.keys(log.attributePoints || {}).forEach(attr => {
                        log.streaks[attr] = 0;
                    });
                }
                
                // Recalcular streaks baseado em hist√≥rico
                recalculateStreaks(log);
                
                // Normalizar pontua√ß√£o
                const mandatoryCount = log.attributesConfig.mandatory.length;
                log.normalizedScore = mandatoryCount > 0 ? log.totalPoints / mandatoryCount : 0;
                
                // Adicionar ao hist√≥rico de logs
                appState.logs.push(log);
                
                // Atualizar dados do jogador
                updatePlayerData(log);
                
                return true;
            } catch (error) {
                console.error('‚ùå Erro ao processar log:', error);
                return false;
            }
        }

        function recalculateStreaks(log) {
            const playerName = log.player;
            const logDate = new Date(log.date);
            
            // Encontrar logs anteriores do jogador
            const playerLogs = appState.logs
                .filter(l => l.player === playerName)
                .sort((a, b) => new Date(a.date) - new Date(b.date));
            
            // Se n√£o h√° logs anteriores, manter o streak atual
            if (playerLogs.length === 0) {
                return;
            }
            
            // Encontrar o √∫ltimo log antes da data atual
            const previousLogs = playerLogs.filter(l => {
                const lDate = new Date(l.date);
                return lDate < logDate;
            });
            
            if (previousLogs.length === 0) {
                // Primeiro log do jogador
                log.streaks.global = 1;
                Object.keys(log.attributePoints || {}).forEach(attr => {
                    log.streaks[attr] = log.attributePoints[attr] > 0 ? 1 : 0;
                });
                return;
            }
            
            const lastLog = previousLogs[previousLogs.length - 1];
            const lastDate = new Date(lastLog.date);
            const daysDifference = Math.floor((logDate - lastDate) / (1000 * 60 * 60 * 24));
            
            // Calcular streaks
            if (daysDifference === 1) {
                // Dia consecutivo
                log.streaks.global = lastLog.streaks.global + 1;
                
                Object.keys(log.attributePoints || {}).forEach(attr => {
                    const hasPoints = log.attributePoints[attr] > 0;
                    const lastStreak = lastLog.streaks[attr] || 0;
                    log.streaks[attr] = hasPoints ? lastStreak + 1 : 0;
                });
            } else {
                // N√£o √© dia consecutivo
                log.streaks.global = 1;
                Object.keys(log.attributePoints || {}).forEach(attr => {
                    log.streaks[attr] = log.attributePoints[attr] > 0 ? 1 : 0;
                });
            }
        }

        function updatePlayerData(log) {
            const playerName = log.player;
            
            if (!appState.players.has(playerName)) {
                // Novo jogador
                appState.players.set(playerName, {
                    name: playerName,
                    totalPoints: 0,
                    normalizedScore: 0,
                    streaks: {
                        current: 0,
                        best: 0
                    },
                    level: 1,
                    daysActive: 0,
                    lastActivity: null,
                    attributes: {},
                    history: []
                });
            }
            
            const player = appState.players.get(playerName);
            
            // Atualizar dados
            player.totalPoints += log.totalPoints;
            player.normalizedScore = player.totalPoints / Math.max(player.daysActive + 1, 1);
            player.level = Math.max(player.level, log.level);
            player.daysActive++;
            player.lastActivity = log.date;
            
            // Atualizar streaks
            player.streaks.current = log.streaks.global;
            player.streaks.best = Math.max(player.streaks.best, log.streaks.global);
            
            // Atualizar hist√≥rico
            player.history.push({
                date: log.date,
                points: log.totalPoints,
                normalizedScore: log.normalizedScore,
                streaks: log.streaks
            });
            
            // Atualizar atributos
            Object.entries(log.attributePoints || {}).forEach(([attr, points]) => {
                if (!player.attributes[attr]) {
                    player.attributes[attr] = {
                        totalPoints: 0,
                        streaks: {
                            current: 0,
                            best: 0
                        }
                    };
                }
                
                player.attributes[attr].totalPoints += points;
                player.attributes[attr].streaks.current = log.streaks[attr] || 0;
                player.attributes[attr].streaks.best = Math.max(
                    player.attributes[attr].streaks.best,
                    log.streaks[attr] || 0
                );
            });
        }

        // ============================================
        // RANKINGS E ESTAT√çSTICAS
        // ============================================
        function updateRankings() {
            const playersArray = Array.from(appState.players.values());
            
            // Ordenar por score normalizado, depois streak, depois dias ativos
            playersArray.sort((a, b) => {
                if (b.normalizedScore !== a.normalizedScore) {
                    return b.normalizedScore - a.normalizedScore;
                }
                if (b.streaks.current !== a.streaks.current) {
                    return b.streaks.current - a.streaks.current;
                }
                return b.daysActive - a.daysActive;
            });
            
            // Atualizar todos os rankings
            appState.rankings.overall = playersArray;
            
            // Aqui poder√≠amos calcular rankings semanais/mensais
            // baseados na data dos logs
            appState.rankings.weekly = playersArray;
            appState.rankings.monthly = playersArray;
            appState.rankings.daily = playersArray;
            
            updateStats();
        }

        function updateStats() {
            const playersArray = Array.from(appState.players.values());
            
            appState.stats.totalPlayers = playersArray.length;
            appState.stats.processedLogs = appState.logs.length;
            
            if (playersArray.length > 0) {
                const totalScore = playersArray.reduce((sum, p) => sum + p.normalizedScore, 0);
                appState.stats.avgScore = totalScore / playersArray.length;
                
                const bestStreak = Math.max(...playersArray.map(p => p.streaks.best));
                appState.stats.bestStreak = bestStreak;
            } else {
                appState.stats.avgScore = 0;
                appState.stats.bestStreak = 0;
            }
        }

        // ============================================
        // INTERFACE DO USU√ÅRIO
        // ============================================
        function updateUI() {
            updateStatsDisplay();
            updateRankingsTable();
            updatePlayersList();
            updateNavCounters();
        }

        function updateStatsDisplay() {
            document.getElementById('total-players').textContent = appState.stats.totalPlayers;
            document.getElementById('avg-score').textContent = appState.stats.avgScore.toFixed(1);
            document.getElementById('best-streak').textContent = appState.stats.bestStreak;
            document.getElementById('total-days').textContent = appState.logs.length;
            
            document.getElementById('active-players').textContent = appState.stats.totalPlayers;
            document.getElementById('processed-logs').textContent = appState.stats.processedLogs;
        }

        function updateRankingsTable() {
            const period = document.getElementById('ranking-period').value;
            const rankings = appState.rankings[period] || [];
            const tbody = document.getElementById('ranking-body');
            
            if (rankings.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 3rem; color: var(--text-secondary);">
                            <i class="fas fa-trophy" style="font-size: 3rem; margin-bottom: 1rem; display: block; opacity: 0.3;"></i>
                            Processe logs para gerar rankings
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = rankings.map((player, index) => {
                const rank = index + 1;
                const rankClass = rank <= 3 ? `rank-${rank}` : '';
                
                return `
                    <tr class="${rankClass}">
                        <td>
                            <span class="rank-badge">${rank}</span>
                        </td>
                        <td>
                            <strong>${player.name}</strong>
                        </td>
                        <td>
                            <strong>${player.normalizedScore.toFixed(1)}</strong>
                        </td>
                        <td>${player.totalPoints}</td>
                        <td>
                            <span class="streak-indicator">
                                <i class="fas fa-fire"></i>
                                ${player.streaks.current}
                            </span>
                        </td>
                        <td>
                            <span class="level-badge">${player.level}</span>
                        </td>
                        <td>${player.daysActive}</td>
                    </tr>
                `;
            }).join('');
            
            // Atualizar label do per√≠odo
            const periodLabels = {
                daily: 'Di√°rio',
                weekly: 'Semanal',
                monthly: 'Mensal',
                overall: 'Geral'
            };
            document.getElementById('ranking-period-label').textContent = periodLabels[period];
        }

        function updatePlayersList() {
            const container = document.getElementById('players-list');
            const playersArray = Array.from(appState.players.values());
            
            if (playersArray.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
                        <i class="fas fa-users" style="font-size: 3rem; margin-bottom: 1rem; display: block; opacity: 0.3;"></i>
                        Nenhum jogador registrado ainda
                    </div>
                `;
                return;
            }
            
            container.innerHTML = playersArray.map(player => {
                return `
                    <div class="expandable-header" data-player="${player.name}">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--accent-blue), var(--accent-cyan)); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-user-ninja"></i>
                            </div>
                            <div>
                                <strong style="display: block; margin-bottom: 4px;">${player.name}</strong>
                                <small style="color: var(--text-secondary);">
                                    N√≠vel ${player.level} ‚Ä¢ ${player.daysActive} dias
                                </small>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 1.2rem; font-weight: 700; color: var(--accent-cyan);">
                                ${player.normalizedScore.toFixed(1)}
                            </div>
                            <small style="color: var(--text-secondary);">score</small>
                        </div>
                    </div>
                    <div class="expandable-content" data-player-content="${player.name}">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
                            <div>
                                <small style="color: var(--text-secondary);">Total de Pontos</small>
                                <div style="font-weight: 600;">${player.totalPoints}</div>
                            </div>
                            <div>
                                <small style="color: var(--text-secondary);">Streak Atual</small>
                                <div style="font-weight: 600; color: var(--danger-red);">
                                    <i class="fas fa-fire"></i> ${player.streaks.current}
                                </div>
                            </div>
                            <div>
                                <small style="color: var(--text-secondary);">Melhor Streak</small>
                                <div style="font-weight: 600; color: var(--warning-orange);">
                                    ${player.streaks.best}
                                </div>
                            </div>
                            <div>
                                <small style="color: var(--text-secondary);">√öltima Atividade</small>
                                <div style="font-weight: 600;">${player.lastActivity || 'N/A'}</div>
                            </div>
                        </div>
                        
                        <h4 style="margin: 1rem 0; color: var(--accent-cyan);">Atributos</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 0.5rem;">
                            ${Object.entries(player.attributes || {}).map(([attr, data]) => `
                                <div style="background: rgba(0, 0, 0, 0.2); padding: 0.5rem; border-radius: 4px;">
                                    <small style="color: var(--text-secondary);">${attr}</small>
                                    <div style="font-weight: 600;">${data.totalPoints} pts</div>
                                    <small style="color: var(--danger-red);">
                                        <i class="fas fa-fire"></i> ${data.streaks.current}
                                    </small>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                            <button class="btn btn-small btn-secondary" onclick="viewPlayerHistory('${player.name}')">
                                <i class="fas fa-history"></i> Hist√≥rico
                            </button>
                            <button class="btn btn-small btn-primary" onclick="exportPlayerData('${player.name}')">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
            
            // Adicionar event listeners aos headers expans√≠veis
            document.querySelectorAll('.expandable-header').forEach(header => {
                header.addEventListener('click', function() {
                    const playerName = this.dataset.player;
                    const content = document.querySelector(`[data-player-content="${playerName}"]`);
                    content.classList.toggle('active');
                });
            });
        }

        function updateNavCounters() {
            // Atualizar badges nos itens de navega√ß√£o
            const playerCount = appState.players.size;
            const logCount = appState.logs.length;
            
            // Adicionar badges se necess√°rio
            document.querySelectorAll('.nav-item').forEach(item => {
                const section = item.dataset.section;
                let badge = item.querySelector('.nav-badge');
                
                if (!badge) {
                    badge = document.createElement('span');
                    badge.className = 'nav-badge';
                    badge.style.cssText = `
                        background: var(--accent-blue);
                        color: white;
                        font-size: 0.7rem;
                        padding: 2px 6px;
                        border-radius: 10px;
                        margin-left: auto;
                    `;
                    item.appendChild(badge);
                }
                
                switch(section) {
                    case 'players':
                        badge.textContent = playerCount;
                        badge.style.display = playerCount > 0 ? 'inline-block' : 'none';
                        break;
                    case 'logs':
                        // N√£o mostrar badge para logs
                        badge.style.display = 'none';
                        break;
                    case 'rankings':
                        badge.textContent = playerCount;
                        badge.style.display = playerCount > 0 ? 'inline-block' : 'none';
                        break;
                }
            });
        }

        function showValidationResult(total, processed, errors, skipped) {
            const container = document.getElementById('validation-result');
            const details = document.getElementById('validation-details');
            
            container.style.display = 'block';
            container.className = `validation-result ${processed > 0 ? 'validation-success' : 'validation-error'}`;
            
            details.innerHTML = `
                <div class="validation-item ${processed > 0 ? 'success' : 'error'}">
                    <i class="fas fa-${processed > 0 ? 'check-circle' : 'times-circle'}"></i>
                    <span>${total} logs encontrados</span>
                </div>
                <div class="validation-item success">
                    <i class="fas fa-check-circle"></i>
                    <span>${processed} processados com sucesso</span>
                </div>
                ${errors > 0 ? `
                <div class="validation-item error">
                    <i class="fas fa-times-circle"></i>
                    <span>${errors} com erros de valida√ß√£o</span>
                </div>
                ` : ''}
                ${skipped > 0 ? `
                <div class="validation-item warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>${skipped} ignorados (duplicados)</span>
                </div>
                ` : ''}
                <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
                    <small style="color: var(--text-secondary);">
                        <i class="fas fa-info-circle"></i>
                        Rankings atualizados automaticamente
                    </small>
                </div>
            `;
        }

        function showToast(message, type = 'info') {
            const container = document.querySelector('.toast-container');
            const toast = document.createElement('div');
            
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <i class="fas fa-${
                    type === 'success' ? 'check-circle' :
                    type === 'error' ? 'times-circle' :
                    type === 'warning' ? 'exclamation-triangle' : 'info-circle'
                }"></i>
                <div>${message}</div>
            `;
            
            container.appendChild(toast);
            
            // Animar entrada
            setTimeout(() => toast.classList.add('show'), 10);
            
            // Remover ap√≥s 5 segundos
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 5000);
        }

        // ============================================
        // FUN√á√ïES DE EXPORTA√á√ÉO
        // ============================================
        function exportData(format = 'json') {
            try {
                const data = {
                    players: Object.fromEntries(appState.players),
                    logs: appState.logs,
                    rankings: appState.rankings,
                    stats: appState.stats,
                    exportedAt: new Date().toISOString()
                };
                
                let content, mimeType, extension;
                
                if (format === 'json') {
                    content = JSON.stringify(data, null, 2);
                    mimeType = 'application/json';
                    extension = 'json';
                } else if (format === 'csv') {
                    // Converter jogadores para CSV
                    const headers = ['Nome', 'Score', 'Pontos', 'Streak', 'N√≠vel', 'Dias Ativos'];
                    const rows = Array.from(appState.players.values()).map(p => [
                        p.name,
                        p.normalizedScore.toFixed(1),
                        p.totalPoints,
                        p.streaks.current,
                        p.level,
                        p.daysActive
                    ]);
                    
                    content = [headers, ...rows].map(row => 
                        row.map(cell => `"${cell}"`).join(',')
                    ).join('\n');
                    
                    mimeType = 'text/csv';
                    extension = 'csv';
                }
                
                const blob = new Blob([content], { type: mimeType });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `dados-principal-${new Date().toISOString().split('T')[0]}.${extension}`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showToast(`Dados exportados em ${format.toUpperCase()}!`, 'success');
            } catch (error) {
                console.error('‚ùå Erro ao exportar dados:', error);
                showToast('Erro ao exportar dados!', 'error');
            }
        }

        function exportPlayerData(playerName) {
            const player = appState.players.get(playerName);
            if (!player) return;
            
            const data = {
                player: player,
                logs: appState.logs.filter(l => l.player === playerName),
                exportedAt: new Date().toISOString()
            };
            
            const content = JSON.stringify(data, null, 2);
            const blob = new Blob([content], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `jogador-${playerName}-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast(`Dados de ${playerName} exportados!`, 'success');
        }

        function viewPlayerHistory(playerName) {
            const player = appState.players.get(playerName);
            if (!player) return;
            
            const modal = document.getElementById('player-details-modal');
            const content = document.getElementById('player-details-content');
            
            content.innerHTML = `
                <div style="margin-bottom: 1.5rem;">
                    <h4 style="color: var(--accent-cyan); margin-bottom: 0.5rem;">${player.name}</h4>
                    <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                        <span class="level-badge">N√≠vel ${player.level}</span>
                        <span style="background: rgba(255, 71, 87, 0.1); color: var(--danger-red); padding: 0.3rem 0.8rem; border-radius: 20px;">
                            <i class="fas fa-fire"></i> Streak: ${player.streaks.current}
                        </span>
                    </div>
                </div>
                
                <h5 style="margin-bottom: 1rem; color: var(--text-primary);">
                    <i class="fas fa-history"></i> Hist√≥rico de Atividades
                </h5>
                
                <div style="max-height: 300px; overflow-y: auto;">
                    ${player.history.length > 0 ? player.history.map(entry => `
                        <div style="background: rgba(0, 0, 0, 0.2); padding: 0.8rem; border-radius: 6px; margin-bottom: 0.5rem;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <strong>${entry.date}</strong>
                                <span style="color: var(--accent-cyan); font-weight: 600;">
                                    ${entry.points} pontos
                                </span>
                            </div>
                            <div style="font-size: 0.9rem; color: var(--text-secondary);">
                                Score: ${entry.normalizedScore.toFixed(1)} ‚Ä¢ 
                                Streak Global: ${entry.streaks.global || 0}
                            </div>
                        </div>
                    `).join('') : `
                        <div style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                            <i class="fas fa-history" style="font-size: 2rem; margin-bottom: 1rem; display: block; opacity: 0.3;"></i>
                            Nenhum hist√≥rico dispon√≠vel
                        </div>
                    `}
                </div>
            `;
            
            modal.classList.add('active');
        }

        // ============================================
        // FERRAMENTAS ADMINISTRATIVAS
        // ============================================
        function cleanInvalidLogs() {
            const initialCount = appState.logs.length;
            
            // Filtrar logs inv√°lidos (simula√ß√£o)
            // Em um sistema real, faria valida√ß√£o completa
            appState.logs = appState.logs.filter(log => {
                try {
                    const validation = validateLog(log);
                    return validation.isValid;
                } catch {
                    return false;
                }
            });
            
            const removed = initialCount - appState.logs.length;
            
            if (removed > 0) {
                updateRankings();
                saveToStorage();
                updateUI();
                showToast(`${removed} logs inv√°lidos removidos!`, 'success');
            } else {
                showToast('Nenhum log inv√°lido encontrado', 'info');
            }
        }

        function resetSystem() {
            const modal = document.getElementById('reset-confirm-modal');
            modal.classList.add('active');
        }

        function confirmReset() {
            // Limpar todos os dados
            appState.players.clear();
            appState.logs = [];
            appState.rankings = {
                daily: [],
                weekly: [],
                monthly: [],
                overall: []
            };
            appState.stats = {
                totalPlayers: 0,
                processedLogs: 0,
                avgScore: 0,
                bestStreak: 0
            };
            
            // Limpar localStorage
            Object.values(SYSTEM.STORAGE_KEYS).forEach(key => {
                localStorage.removeItem(key);
            });
            
            // Fechar modal
            document.getElementById('reset-confirm-modal').classList.remove('active');
            
            // Atualizar UI
            updateUI();
            
            showToast('Sistema resetado com sucesso!', 'success');
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================
        function setupEventListeners() {
            // Navega√ß√£o
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remover classe active de todos
                    document.querySelectorAll('.nav-item').forEach(i => {
                        i.classList.remove('active');
                    });
                    
                    // Adicionar ao item clicado
                    this.classList.add('active');
                    
                    // Mostrar se√ß√£o correspondente
                    const section = this.dataset.section;
                    document.querySelectorAll('.content-section').forEach(sec => {
                        sec.style.display = 'none';
                    });
                    document.getElementById(`${section}-section`).style.display = 'block';
                });
            });
            
            // Processar logs
            document.getElementById('process-logs').addEventListener('click', processLogs);
            
            // Limpar entrada
            document.getElementById('clear-input').addEventListener('click', function() {
                document.getElementById('log-input').value = '';
                document.getElementById('validation-result').style.display = 'none';
            });
            
            // Atualizar rankings
            document.getElementById('ranking-period').addEventListener('change', updateRankingsTable);
            document.getElementById('refresh-rankings').addEventListener('click', function() {
                updateRankings();
                updateUI();
                showToast('Rankings atualizados!', 'success');
            });
            
            // Buscar jogadores
            document.getElementById('player-search').addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase();
                const players = document.querySelectorAll('[data-player]');
                
                players.forEach(player => {
                    const playerName = player.dataset.player.toLowerCase();
                    const content = document.querySelector(`[data-player-content="${player.dataset.player}"]`);
                    
                    if (playerName.includes(searchTerm) || searchTerm === '') {
                        player.parentElement.style.display = 'block';
                    } else {
                        player.parentElement.style.display = 'none';
                        content.classList.remove('active');
                    }
                });
            });
            
            // Ferramentas
            document.getElementById('clean-invalid-logs').addEventListener('click', cleanInvalidLogs);
            document.getElementById('reset-system').addEventListener('click', resetSystem);
            document.getElementById('create-backup').addEventListener('click', createBackup);
            
            // Exporta√ß√£o
            document.getElementById('export-json').addEventListener('click', () => exportData('json'));
            document.getElementById('export-csv').addEventListener('click', () => exportData('csv'));
            document.getElementById('export-history').addEventListener('click', () => exportData('json'));
            document.getElementById('export-players').addEventListener('click', () => exportData('json'));
            
            // Modais
            document.getElementById('close-player-modal').addEventListener('click', function() {
                document.getElementById('player-details-modal').classList.remove('active');
            });
            
            document.getElementById('close-reset-modal').addEventListener('click', function() {
                document.getElementById('reset-confirm-modal').classList.remove('active');
            });
            
            document.getElementById('cancel-reset').addEventListener('click', function() {
                document.getElementById('reset-confirm-modal').classList.remove('active');
            });
            
            document.getElementById('confirm-reset').addEventListener('click', confirmReset);
            
            // Fechar modais ao clicar fora
            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                    }
                });
            });
            
            // Validar log √∫nico
            document.getElementById('validate-single').addEventListener('click', function() {
                const input = document.getElementById('log-input').value.trim();
                if (!input) {
                    showToast('Insira um log para validar!', 'warning');
                    return;
                }
                
                try {
                    const log = JSON.parse(input);
                    const validation = validateLog(log);
                    
                    if (validation.isValid) {
                        showToast('‚úÖ Log v√°lido! Pode ser processado.', 'success');
                    } else {
                        showToast('‚ùå Log inv√°lido: ' + validation.errors.join(', '), 'error');
                    }
                } catch (error) {
                    showToast('‚ùå JSON inv√°lido: ' + error.message, 'error');
                }
            });
        }

        // ============================================
        // FUN√á√ïES GLOBAIS (para uso em onclick)
        // ============================================
        window.viewPlayerHistory = viewPlayerHistory;
        window.exportPlayerData = exportPlayerData;
    </script>
    <style>
/* Menu Mobile Fixo - ATUALIZADO */
.mobile-menu-btn {
    display: none;
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 1001;
    background: var(--accent-blue);
    color: white;
    border: none;
    border-radius: 6px;
    width: 50px;
    height: 50px;
    font-size: 1.2rem;
    cursor: pointer;
    box-shadow: var(--glow-blue);
}

/* Overlay para fechar sidebar */
.sidebar-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    z-index: 998;
    backdrop-filter: blur(3px);
}

/* Menu mobile na parte inferior - NOVO */
.mobile-nav {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--primary-black);
    padding: 10px 0;
    border-top: 1px solid var(--border-color);
    z-index: 1000;
    box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.5);
}

.mobile-nav-container {
    display: flex;
    justify-content: space-around;
    align-items: center;
}

.mobile-nav-btn {
    background: none;
    border: none;
    color: var(--text-secondary);
    padding: 10px 15px;
    font-size: 1.2rem;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    transition: all 0.3s ease;
    border-radius: 8px;
    flex: 1;
}

.mobile-nav-btn span {
    font-size: 0.8rem;
    display: block;
}

.mobile-nav-btn:hover {
    background: rgba(0, 168, 255, 0.1);
}

.mobile-nav-btn.active {
    color: var(--accent-blue);
    background: rgba(0, 168, 255, 0.15);
}

/* Media Queries Corrigidas */
@media (max-width: 1024px) {
    .mobile-menu-btn {
        display: block;
    }
    
    .sidebar {
        position: fixed;
        left: -280px;
        top: 0;
        height: 100vh;
        transition: left 0.3s ease;
        z-index: 999;
        box-shadow: 5px 0 30px rgba(0, 0, 0, 0.5);
    }
    
    .sidebar.active {
        left: 0;
    }
    
    .app-container::before {
        font-size: 30vw;
    }
}

@media (max-width: 768px) {
    .mobile-nav {
        display: block;
    }
    
    .main-content {
        padding-bottom: 80px; /* Espa√ßo para o menu inferior */
    }
    
    .header-actions {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .kanji-decoration {
        display: none; /* Otimiza performance mobile */
    }
}
</style>

<script>
// Fun√ß√µes para menu mobile
function toggleSidebar() {
    const sidebar = document.querySelector('.sidebar');
    const overlay = document.createElement('div');
    overlay.className = 'sidebar-overlay';
    
    if (!sidebar.classList.contains('active')) {
        // Abrir sidebar
        sidebar.classList.add('active');
        overlay.classList.add('active');
        document.body.appendChild(overlay);
        
        // Fechar ao clicar no overlay
        overlay.addEventListener('click', () => {
            sidebar.classList.remove('active');
            document.body.removeChild(overlay);
        });
    } else {
        // Fechar sidebar
        sidebar.classList.remove('active');
        const existingOverlay = document.querySelector('.sidebar-overlay');
        if (existingOverlay) {
            document.body.removeChild(existingOverlay);
        }
    }
}

// Fun√ß√£o para navega√ß√£o mobile
function switchSection(sectionId) {
    // Esconder todas as se√ß√µes
    document.querySelectorAll('.content-section').forEach(section => {
        section.style.display = 'none';
    });
    
    // Mostrar a se√ß√£o selecionada
    const targetSection = document.getElementById(sectionId + '-section');
    if (targetSection) {
        targetSection.style.display = 'block';
    }
    
    // Atualizar menu mobile
    document.querySelectorAll('.mobile-nav-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    
    // Atualizar sidebar (se estiver vis√≠vel)
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
    });
    
    const navItem = document.querySelector(`.nav-item[data-section="${sectionId}"]`);
    if (navItem) {
        navItem.classList.add('active');
    }
    
    // Atualizar menu inferior
    const mobileBtn = document.querySelector(`.mobile-nav-btn[data-section="${sectionId}"]`);
    if (mobileBtn) {
        mobileBtn.classList.add('active');
    }
    
    // Fechar sidebar no mobile
    if (window.innerWidth <= 1024) {
        const sidebar = document.querySelector('.sidebar');
        const overlay = document.querySelector('.sidebar-overlay');
        if (sidebar) sidebar.classList.remove('active');
        if (overlay) document.body.removeChild(overlay);
    }
}

// Inicializar menu mobile
document.addEventListener('DOMContentLoaded', function() {
    // Criar bot√£o de menu mobile dinamicamente
    const mobileMenuBtn = document.createElement('button');
    mobileMenuBtn.className = 'mobile-menu-btn';
    mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
    mobileMenuBtn.onclick = toggleSidebar;
    document.body.appendChild(mobileMenuBtn);
    
    // Criar menu mobile inferior
    const mobileNav = document.createElement('div');
    mobileNav.className = 'mobile-nav';
    mobileNav.innerHTML = `
        <div class="mobile-nav-container">
            <button class="mobile-nav-btn active" data-section="logs" onclick="switchSection('logs')">
                <i class="fas fa-file-import"></i>
                <span>Logs</span>
            </button>
            <button class="mobile-nav-btn" data-section="rankings" onclick="switchSection('rankings')">
                <i class="fas fa-trophy"></i>
                <span>Ranking</span>
            </button>
            <button class="mobile-nav-btn" data-section="players" onclick="switchSection('players')">
                <i class="fas fa-users"></i>
                <span>Jogadores</span>
            </button>
            <button class="mobile-nav-btn" data-section="tools" onclick="switchSection('tools')">
                <i class="fas fa-tools"></i>
                <span>Ferramentas</span>
            </button>
        </div>
    `;
    document.body.appendChild(mobileNav);
    
    // Atualizar navega√ß√£o existente para usar a nova fun√ß√£o
    document.querySelectorAll('.nav-item').forEach(item => {
        item.addEventListener('click', function(e) {
            e.preventDefault();
            const section = this.dataset.section;
            switchSection(section);
        });
    });
    
    // Fechar sidebar ao redimensionar para desktop
    window.addEventListener('resize', function() {
        if (window.innerWidth > 1024) {
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.querySelector('.sidebar-overlay');
            if (sidebar) sidebar.classList.remove('active');
            if (overlay) document.body.removeChild(overlay);
        }
    });
});

// Adicionar ao objeto window para acesso global
window.toggleSidebar = toggleSidebar;
window.switchSection = switchSection;
</script>
</body>
</html>